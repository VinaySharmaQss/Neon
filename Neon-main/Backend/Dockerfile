FROM node:22-alpine

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .

EXPOSE 3000

RUN npx prisma generate

# Add environment variables
ENV PORT=3000
ENV FRONTEND_URL=http://localhost:5173
ENV DATABASE_URL="postgresql://postgres:Jangotravinay@localhost:5432/Neon?schema=public"
ENV ACCESS_TOKEN_SECRET=1234567890123456789012345678901234567890
ENV REFRESH_TOKEN_SECRET=1234567890123456789012345678901234567890
ENV ACCESS_TOKEN_LIFETIME=12h
ENV REFRESH_TOKEN_LIFETIME=7d
ENV CLOUDINARY_CLOUD_NAME=dh8jfea55
ENV CLOUDINARY_API_KEY=711127897913751
ENV CLOUDINARY_API_SECRET=KEKQDOz6PnGUQO9AF5_Fw6aE2nQ
ENV STRIPE_SECERT_KEY=sk_test_51QzWWqEjHSXuhKUsVPEpeKGvB7SFmKW7VyEXCV7pknHrCcRUU2xS9Dr0LCMGBRT3zUahpgRPFmEcmOEKavAGhIeG00sGfLnJZw

CMD [ "npm", "run", "dev" ]